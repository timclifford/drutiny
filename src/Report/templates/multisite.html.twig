{% include 'includes/header.html.twig' %}

<!-- Main jumbotron for a primary marketing message or call to action -->
<div class="jumbotron">
  <div class="container">
    <h1>{{ title }}</h1>
    <p>Report ran across <strong>{{ domains | length }}</strong> site{% if domains | length > 1 %}s{% endif %}<br/>
      {{ 'now' | date('Y-m-d h:i a (T)') }}
    </p>
  </div>
</div>

<div class="container">
  <!-- Example row of columns -->
  <div class="row">

    <div class="col-sm-12">
      <h2>Summary</h2>

      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Policy</th>
            <th>Result</th>
          </tr>
        </thead>
        <tbody>
          {% for policy_results in results %}
            <tr>
              <td><a href="#{{ policy_results.id }}">{{ policy_results.title }}</a></td>
              <td>{{ policy_results.pass }} of {{ policy_results.total }} sites passed</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <h2>Policy failures by site</h2>
      {% for policy_results in results %}
      {% if policy_results.pass < policy_results.total %}
      <h3 id="{{ policy_results.id }}">{{ policy_results.title }}</h3>
      <div>{{ policy_results.description | raw }}</div>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Site</th>
            <th>Result</th>
          </tr>
        </thead>
        <tbody>
          {% for uri, site in policy_results.sites %}
            {% if not site.status %}
            <tr>
              <td>{{ uri }}</td>
              <td>
                {% if site.has_warning %}
                <div class="alert alert-warning" role="alert">{{ site.warning | raw }}</div>
                {% endif %}
                {{ site.summary | raw }}
              </td>
            </tr>
            {% endif %}
          {% endfor %}
        </tbody>
      </table>
      {% endif %}
      {% endfor %}
    </div>
  </div>

  <hr>

  <footer>
    <p>&copy; Drutiny {{ 'now' | date('Y') }}</p>
  </footer>
</div> <!-- /container -->

{% include 'includes/footer.html.twig' %}
